{
  "$id": "https://prms/schemas/knowledge_product.json",
  "title": "Knowledge Product",
  "description": "Schema for Knowledge Product results, extending common_fields.json",
  "type": "object",
  "allOf": [
    { "$ref": "https://prms/schemas/common_fields.json" },
    {
      "type": "object",
      "properties": {
        "knowledge_product": {
          "type": "object",
          "description": "Knowledge product specific fields",
          "properties": {
            "handle": {
              "type": "string",
              "description": "Unique identifier or handle for the knowledge product (e.g. DOI or institutional handle)"
            },
            "knowledge_product_type": {
              "type": "string",
              "description": "Type of knowledge product (e.g. Journal Article, Policy Brief, Report)"
            },
            "metadataCG": {
              "type": "object",
              "description": "Metadata describing accessibility, DOI, peer-review status, and publication dates.",
              "properties": {
                "source": { "type": "string" },
                "accessibility": { "type": "boolean" },
                "is_isi": { "type": "boolean" },
                "is_peer_reviewed": { "type": "boolean" },
                "issue_year": { "type": "number" }
              },
              "required": ["source", "accessibility", "is_isi", "is_peer_reviewed", "issue_year"]
            },
            "licence": {
              "type": "string",
              "description": "License under which the knowledge product is published (e.g. CC-BY 4.0)"
            },
            "agrovoc_keywords": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Controlled vocabulary keywords from AGROVOC."
            }
          },
          "required": [
            "handle",
            "knowledge_product_type",
            "metadataCG",
            "licence"
          ],
          "additionalProperties": false
        }
      },
      "required": ["knowledge_product"]
    }
  ]
}
