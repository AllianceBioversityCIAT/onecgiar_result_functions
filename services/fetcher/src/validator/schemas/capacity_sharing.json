{
  "$id": "https://prms/schemas/capacity_sharing.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Capacity Sharing Result",
  "description": "Schema for capacity sharing results",
  "allOf": [
    { "$ref": "https://prms/schemas/common_fields.json" },
    {
      "type": "object",
      "properties": {
        "capacity_sharing": {
          "type": "object",
          "properties": {
            "number_people_trained": {
              "type": "object",
              "properties": {
                "women": { "type": "number" },
                "men": { "type": "number" },
                "non_binary": { "type": "number" },
                "unknown": { "type": "number" }
              },
              "additionalProperties": false,
              "anyOf": [
                { "required": ["women"] },
                { "required": ["men"] },
                { "required": ["non_binary"] },
                { "required": ["unknown"] }
              ]
            },
            "length_training": {
              "type": "object",
              "properties": {
                "short_term": { "type": "boolean" },
                "long_term": { "type": "boolean" },
                "phd": { "type": "boolean" },
                "master": { "type": "boolean" }
              },
              "additionalProperties": false,
              "anyOf": [
                { "required": ["short_term"] },
                { "required": ["long_term"] }
              ],
              "if": {
                "properties": { "long_term": { "const": true } }
              },
              "then": {
                "anyOf": [{ "required": ["phd"] }, { "required": ["master"] }]
              }
            },
            "delivery_method": {
              "type": "object",
              "properties": {
                "virtual_online": { "type": "boolean" },
                "in_person": { "type": "boolean" },
                "blended": { "type": "boolean" }
              },
              "additionalProperties": false,
              "anyOf": [
                { "required": ["virtual_online"] },
                { "required": ["in_person"] },
                { "required": ["blended"] }
              ]
            }
          },
          "required": [
            "number_people_trained",
            "length_training",
            "delivery_method"
          ]
        }
      },
      "required": ["capacity_sharing"]
    }
  ]
}
